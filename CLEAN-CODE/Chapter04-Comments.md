# Chapter 4. 주석

> Dont' comment bad code - rewrite it

주석은 기껏해야 필요악이다. 우리에게 프로그래밍 언어를 조율해 *의도를 표현*할 능력이 있다면 주석은 전혀 필요하지 않다.

우리는 코드로 의도를 표현하지 못할 때, 그러니까 실패를 만회하기 위해 주석을 사용한다. 그러므로 주석이 필요한 상황에 처하게 되면 곰곰히 생각해봐라. **코드로 의도를 표현할 방법이 없을지**

왜 이렇게 주석에 회의적일까? 주석은 거짓말을 하니까. 항상 그렇지는 않고, 의도적으로 그러는 것도 아니지만, 너무 자주. *주석은 오래 될수록 코드에서 멀어진다.* 오래 될수록 완전히 동떨어진 것이 될 수도 있다. 현실적으로 프로그래머가 주석까지 유지보수할 수는 없다.

코드는 변화하고 진화하며, 여기 저기로 옮겨다니고, 조각나고 합쳐진다. 주석이 코드와 함께 할 때도 있지만, 대부분 그 자리에 남아 결국 코드와 멀어진다.

그렇다면 프로그래머들이 주석 역시 엄격하게 관리해야 한다고 주장한다면? 동의한다. 하지만 나라면 코드를 깔금하게 정리하고 표현력을 강화해서 애초에 주석이 필요 없는 방향으로 힘을 쓰겠다.

***부정확한 주석은 아예 없는 주석보다 훨씬 나쁘다***

> Truth can only be found in one place: the code.

## 4.1 주석은 나쁜 코드를 보완하지 못한다
코드에 주석을 추가하는 일반적인 이유는 코드 품질이 나쁘기 때문이다.

* 이런! 주석을 달아야겠다! (X)
* 이런! 코드를 정리해야겠다! (O)

주석으로 설명하는 대신 코드를 정리하자.

## 4.2 코드로 의도를 표현하라
확실히 코드만으로 의도를 설명하기 어려운 경우가 존재한다. 하지만 대다수는 몇 초만 더 생각하면 훨씬 낫게 수정할 수 있다. 많은 경우 *주석으로 달려는 설명을 함수로 만들어 표현*하면 충분하다.

## 4.3 좋은 주석
어떤 주석들은 필요하거나 유익하기도 하다.

### 법적인 주석
때로는 회사가 정립한 구현 표준에 법적인 이유로 특정 주석을 넣으라고 명시한다. 예를 들어 저작권이나 소유권 정보가 그렇다.

### 정보를 제공하는 주석
가끔 기본적인 정보를 주석에 제공하는 건 좋다.
```java
// 테스트 중인 Responder instance를 반환
protected abstract Responder responderInstance();
```

하지만 사실 이것도 그냥  이름을 `responderBeingTested` 로 바꾸는 게 더 낫겠지?

```java
// kk:mm:ss EEE, MMM dd, yyyy 형식
Pattern timeMatcher = Pattern.compile("\\d*:\\d*:\\d* \\w*, \\w* \\d*, \\d*");
```

위와 같은 경우는 더 낫다. 우리는 정규식을 보지 않아도 이게 날짜를 찾아내는 코드라는 걸 알 수 있다. 하지만 이 역시 날짜를 변환하는 어떤 클래스로 옮겼다면 주석이 크게 필요하지 않을 것이다.

### 의도를 설명하는 주석
구현을 이해하게 도와주는 걸 넘어 *결정에 깔린 의도를 설명*하는 주석. 왜 이렇게 했는가? 를 설명하는 주석. 후에 프로그래머를 이해하지 못할지는 몰라도 어떤 이유로 그런 시도를 했는지 알 수 있다.

### 의미를 명료하게 밝히는 주석
인수나 반환 값이 표준 라이브러리나 변경하지 못하는 코드에 속해서 우리가 그 의미를 명확하게 만들 수 없다면 주석이 유용할 수도 있다. 물론 그릇된 주석을 달 위험이 상당히 높으르모 주석을 달기 전에 고민해볼 것.

### 결과를 경고하는 주석
만약 테스트 케이스가 시간이 너무 오래 걸린다면? 아래와 같은 주석을 달아주는 게 좋겠지.

```java
// 여유 시간이 충분하지 않다면 실행하기 마십시오
```

테스트 코드라면 `@Ignore("실행이 너무 오래 걸림")`도 가능

### TODO
대신 필요없어지면 바로 삭제할 것

### 중요성을 강조하는 주석
누군가 대수롭지 않게 여길 무언가의 주석

### 공개 API에서의 Javadocs석
공개 API를 구현한다면 반드시 Javadocs를 잘 작성할 것

## 4.4 나쁜 주석
### 주절거리는 주석
특별한 이유 없이 의무감으로 혹은 프로세스에서 하라니까. 이런 이유로 다는 주석은 시간 낭비다. 주석을 달기로 결정했다면 충분한 시간을 들여 최고의 주석을 달자. 이해가 안 되어 결국 다른 코드까지 뒤져야 하는 주석은 바이트만 낭비할 뿐

### 같은 이야기를 중복하는 주석
코드보다 읽기가 쉬운 것도 아니고 더 나은 정보를 제공하는 것도 아니면 왜 주석을 다는 거야! 코드를 보면 쉽게 알 수 있는데!

### 오해할 여지가 있는 주석
의도는 좋았지만 정확하지 못한 주석. 이런 주석 보고 코드 가져다 썼다가 삽질하게 되죠.

### 의무적으로 다는 주석
모든 함수에 Javadocs를 달라거나 변수에 주석을 달라는 규칙은...

#### 이력을 기록하는 주석
주석이 코드의 history가 되는 경우도. 요새는 좋은 코드 관리 시스템들이 있으니까 이런 주석 달지 말자.

### 있으나 마나 한 주석
이런 주석 왜 다는 것이지. 이런 주석은 개발자가 주석을 무시하는 습관에 빠지게 할 수 있다. 결국 코드가 변경되면 주석은 거짓말이다.
```java
/**
 * 기본 생성자
 */
```

### 무서운 잡음
때로는 Javadocs도 잡음이 될 수 있다. 코드에 비해 아무런 새로운 정보도 제공하지 못하는 주석들.

### 함수나 변수로 표현할 수 있다면 주석 달지 마

### 위치를 표시하는 주석
이런 거...
```java
// Actions ///////////////////////////////////////////
```

### 닫는 괄호에 다는 주석
괄호가 너무 많아서 알아보기 힘들 때 닫는 부분에 다는 주석들은 작고 캡슐화된 함수라면 전혀 필요 없는 주석이다. 그러니 일단 함수를 줄이려고 노력해보자

### 공로를 돌리거나 저자를 표시하는 주석
그냥 소스 코드 관리 시스템을 믿자

### 주석으로 처리한 코드
이런 주석은 사람들이 지우기 주저한다. 이유가 있어 남겨놓았을 거라고 생각하니까. 그렇게 차곡차곡 쌓인다. 그냥 소스 코드 관리 시스템을 믿고 지우자

### HTML 주석
진짜 읽기 어려움

### 전역 정보
코드 일부에 주석을 달면서 시스템 전반적인 정보를 기술하지 말 것

### 너무 많은 정보
흥미로운 역사같은 것이나 관련 없는 세세한 정보들

### 모호한 관계
주석과 코드 사이의 관계가 명확해야 한다. 주석을 다는 이유는 코드에 설명이 부족해서인데 주석에 또 설명이 필요해지면...?

### 함수 헤더
주석으로 헤더 붙이느니 그냥 코드를 제대로 잘 짜

### 비공개 코드의 Javadocs
공개 API면 유용하지만 시스템 내부에 속하는 클래스와 함수에는 왜 굳이...?